submenu 'Advanced options (virtio_x86_64 specific)' --class format-list-bulleted --id advancedoptions-virtio_x86_64 {
	menuentry "@BOOTMGR_ANDROID_DISTRIBUTION_NAME@ ${kernel_version_display} (Intel pre-Skylake GPU passthrough, Mesa graphics)" --id android-virtio_x86_64-i915_preskylake_mesa {
		pre_boot_hook
		set_android_default "advancedoptions-virtio_x86_64>android-virtio_x86_64-i915_preskylake_mesa"
		echo 'Loading kernel...'
		linux ${boot_partition}/kernel $kernel_cmdline_boot $kernel_cmdline_dynamic virtio_gpu.modeset=0 androidboot.gpu=i915 androidboot.graphics=mesa_i915 androidboot.hardware_vulkan=intel_hasvk
		echo 'Loading ramdisk...'
		initrd ${boot_partition}/${boot_ramdisk_filename}
	}

	menuentry "@BOOTMGR_ANDROID_DISTRIBUTION_NAME@ ${kernel_version_display} (Intel Skylake and later GPU passthrough, Mesa graphics)" --id android-virtio_x86_64-i915_skylakeandlater_mesa {
		pre_boot_hook
		set_android_default "advancedoptions-virtio_x86_64>android-virtio_x86_64-i915_skylakeandlater_mesa"
		echo 'Loading kernel...'
		linux ${boot_partition}/kernel $kernel_cmdline_boot $kernel_cmdline_dynamic virtio_gpu.modeset=0 androidboot.gpu=i915 androidboot.graphics=mesa_i915 androidboot.hardware_vulkan=intel
		echo 'Loading ramdisk...'
		initrd ${boot_partition}/${boot_ramdisk_filename}
	}

	menuentry "@BOOTMGR_ANDROID_DISTRIBUTION_NAME@ ${kernel_version_display} (Intel GPU passthrough, Swiftshader graphics)" --id android-virtio_x86_64-i915_skylakeandlater_swiftshader {
		pre_boot_hook
		set_android_default "advancedoptions-virtio_x86_64>android-virtio_x86_64-i915_skylakeandlater_swiftshader"
		echo 'Loading kernel...'
		linux ${boot_partition}/kernel $kernel_cmdline_boot $kernel_cmdline_dynamic virtio_gpu.modeset=0 androidboot.gpu=i915 androidboot.graphics=swiftshader_i915
		echo 'Loading ramdisk...'
		initrd ${boot_partition}/${boot_ramdisk_filename}
	}
}
